---
import { getLangFromUrl } from '~/i18n/utils';
import { getJobs } from '~/queries/jobs';

import JobCardSkeleton from './item-skeleton.astro';
import JobCard from './item.astro';

const lang = getLangFromUrl(Astro.url);
const data = await getJobs(lang);
---

<ul class="relative ml-5 flex flex-col gap-10 border-l border-card">
  {
    !data
      ? [1, 2, 3, 4].map((i) => <JobCardSkeleton key={i} />)
      : data.map((job) => {
          return <JobCard data={job} />;
        })
  }
</ul>
